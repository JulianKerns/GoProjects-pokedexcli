package main

import (
	"fmt"
	"testing"
	"time"

	pokecache "github.com/JulianKerns/pokedexcli/internal/pokecache"
)

func TestAddGet(t *testing.T) {
	const interval = 5 * time.Second
	cases := []struct {
		key string
		val []byte
	}{
		{
			key: "https://pokeapi.co/api/v2/location-area",
			val: []byte("123 34 99 111 117 110 116 34 58 49 48 53 52 44 34 110 101 120 116 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 63 111 102 102 115 101 116 61 50 48 38 108 105 109 105 116 61 50 48 34 44 34 112 114 101 118 105 111 117 115 34 58 110 117 108 108 44 34 114 101 115 117 108 116 115 34 58 91 123 34 110 97 109 101 34 58 34 99 97 110 97 108 97 118 101 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 47 34 125 44 123 34 110 97 109 101 34 58 34 101 116 101 114 110 97 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 47 34 125 44 123 34 110 97 109 101 34 58 34 112 97 115 116 111 114 105 97 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 47 34 125 44 123 34 110 97 109 101 34 58 34 115 117 110 121 115 104 111 114 101 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 52 47 34 125 44 123 34 110 97 109 101 34 58 34 115 105 110 110 111 104 45 112 111 107 101 109 111 110 45 108 101 97 103 117 101 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 53 47 34 125 44 123 34 110 97 109 101 34 58 34 111 114 101 98 117 114 103 104 45 109 105 110 101 45 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 54 47 34 125 44 123 34 110 97 109 101 34 58 34 111 114 101 98 117 114 103 104 45 109 105 110 101 45 98 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 55 47 34 125 44 123 34 110 97 109 101 34 58 34 118 97 108 108 101 121 45 119 105 110 100 119 111 114 107 115 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 56 47 34 125 44 123 34 110 97 109 101 34 58 34 101 116 101 114 110 97 45 102 111 114 101 115 116 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 57 47 34 125 44 123 34 110 97 109 101 34 58 34 102 117 101 103 111 45 105 114 111 110 119 111 114 107 115 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 48 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 114 111 117 116 101 45 50 48 55 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 49 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 50 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 50 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 51 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 51 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 101 120 116 101 114 105 111 114 45 115 110 111 119 102 97 108 108 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 52 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 101 120 116 101 114 105 111 114 45 98 108 105 122 122 97 114 100 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 53 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 52 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 54 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 52 102 45 115 109 97 108 108 45 114 111 111 109 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 55 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 53 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 56 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 54 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 57 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 102 114 111 109 45 101 120 116 101 114 105 111 114 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 48 47 34 125 93 125"),
		},
		{
			key: "https://pokeapi.co/api/v2/location-area?offset=20&limit=20",
			val: []byte("123 34 99 111 117 110 116 34 58 49 48 53 52 44 34 110 101 120 116 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 63 111 102 102 115 101 116 61 52 48 38 108 105 109 105 116 61 50 48 34 44 34 112 114 101 118 105 111 117 115 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 63 111 102 102 115 101 116 61 48 38 108 105 109 105 116 61 50 48 34 44 34 114 101 115 117 108 116 115 34 58 91 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 114 111 117 116 101 45 50 49 54 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 49 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 114 111 117 116 101 45 50 49 49 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 50 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 98 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 51 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 49 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 52 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 50 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 53 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 51 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 54 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 52 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 55 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 53 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 56 47 34 125 44 123 34 110 97 109 101 34 58 34 103 114 101 97 116 45 109 97 114 115 104 45 97 114 101 97 45 54 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 57 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 50 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 48 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 49 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 49 102 45 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 50 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 49 102 45 98 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 51 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 49 102 45 99 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 52 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 50 102 45 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 53 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 50 102 45 98 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 54 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 50 102 45 99 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 55 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 51 102 45 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 56 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 51 102 45 98 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 57 47 34 125 44 123 34 110 97 109 101 34 58 34 115 111 108 97 99 101 111 110 45 114 117 105 110 115 45 98 51 102 45 99 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 52 48 47 34 125 93 125"),
		},
	}
	for i, c := range cases {
		t.Run(fmt.Sprintf("Testing case %v", i), func(t *testing.T) {
			cache := pokecache.NewCache(interval)
			cache.Add(c.key, c.val)
			val, ok := cache.Get(c.key)
			if !ok {
				t.Errorf("expected to find key")
				return
			}
			if string(val) != string(c.val) {
				t.Errorf("expecting the value to be equal")
				return
			}

		})

	}
}

func TestReapLoop(t *testing.T) {
	const baseTime = 5 * time.Millisecond
	const waitTime = baseTime + 5*time.Millisecond
	cache := pokecache.NewCache(baseTime)
	cache.Add("https://pokeapi.co/api/v2/location-area", []byte("123 34 99 111 117 110 116 34 58 49 48 53 52 44 34 110 101 120 116 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 63 111 102 102 115 101 116 61 50 48 38 108 105 109 105 116 61 50 48 34 44 34 112 114 101 118 105 111 117 115 34 58 110 117 108 108 44 34 114 101 115 117 108 116 115 34 58 91 123 34 110 97 109 101 34 58 34 99 97 110 97 108 97 118 101 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 47 34 125 44 123 34 110 97 109 101 34 58 34 101 116 101 114 110 97 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 47 34 125 44 123 34 110 97 109 101 34 58 34 112 97 115 116 111 114 105 97 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 51 47 34 125 44 123 34 110 97 109 101 34 58 34 115 117 110 121 115 104 111 114 101 45 99 105 116 121 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 52 47 34 125 44 123 34 110 97 109 101 34 58 34 115 105 110 110 111 104 45 112 111 107 101 109 111 110 45 108 101 97 103 117 101 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 53 47 34 125 44 123 34 110 97 109 101 34 58 34 111 114 101 98 117 114 103 104 45 109 105 110 101 45 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 54 47 34 125 44 123 34 110 97 109 101 34 58 34 111 114 101 98 117 114 103 104 45 109 105 110 101 45 98 49 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 55 47 34 125 44 123 34 110 97 109 101 34 58 34 118 97 108 108 101 121 45 119 105 110 100 119 111 114 107 115 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 56 47 34 125 44 123 34 110 97 109 101 34 58 34 101 116 101 114 110 97 45 102 111 114 101 115 116 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 57 47 34 125 44 123 34 110 97 109 101 34 58 34 102 117 101 103 111 45 105 114 111 110 119 111 114 107 115 45 97 114 101 97 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 48 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 114 111 117 116 101 45 50 48 55 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 49 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 50 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 50 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 51 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 51 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 101 120 116 101 114 105 111 114 45 115 110 111 119 102 97 108 108 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 52 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 101 120 116 101 114 105 111 114 45 98 108 105 122 122 97 114 100 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 53 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 52 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 54 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 52 102 45 115 109 97 108 108 45 114 111 111 109 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 55 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 53 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 56 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 54 102 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 49 57 47 34 125 44 123 34 110 97 109 101 34 58 34 109 116 45 99 111 114 111 110 101 116 45 49 102 45 102 114 111 109 45 101 120 116 101 114 105 111 114 34 44 34 117 114 108 34 58 34 104 116 116 112 115 58 47 47 112 111 107 101 97 112 105 46 99 111 47 97 112 105 47 118 50 47 108 111 99 97 116 105 111 110 45 97 114 101 97 47 50 48 47 34 125 93 125"))

	_, ok1 := cache.Get("https://pokeapi.co/api/v2/location-area")
	if !ok1 {
		t.Errorf("expected to find key")
		return
	}
	time.Sleep(waitTime)

	_, ok2 := cache.Get("https://pokeapi.co/api/v2/location-area")
	if ok2 {
		t.Errorf("expected to not find the key")
		return
	}
}
